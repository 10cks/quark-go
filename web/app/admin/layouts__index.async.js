"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[717],{52756:function(je,L,e){e.r(L);var x=e(97857),A=e.n(x),z=e(15009),p=e.n(z),$=e(19632),G=e.n($),H=e(99289),C=e.n(H),N=e(5574),c=e.n(N),E=e(67294),r=e(80854),F=e(94740),J=e(3321),Q=e(85418),V=e(33852),Re=e.n(V),X=e(82925),Y=e(53032),q=e(94785),g=e(22934),w=e(66949),O=e(43083),y=e(91373),ee=e(43425),ne=e(92443),ae=e(87547),_=e(85893),_e=function(te){var ue=(0,r.useModel)("pageLoading"),se=ue.pageLoading,oe=(0,E.useState)({}),K=c()(oe,2),u=K[0],re=K[1],le=(0,E.useState)({}),I=c()(le,2),U=I[0],j=I[1],ie=(0,r.useModel)("pageLoading"),P=ie.setPageLoading,de=(0,r.useModel)("@@initialState"),R=de.initialState,s=R==null?void 0:R.accountInfo,h=(0,r.useLocation)(),v=q.Z.parse(h.search),me=(0,E.useState)(""),b=c()(me,2),Ee=b[0],T=b[1],ve=(0,E.useState)([]),B=c()(ve,2),D=B[0],S=B[1],pe=(0,E.useState)([""]),W=c()(pe,2),ce=W[0],k=W[1],Me=(0,E.useState)(!1),Z=c()(Me,2),fe=Z[0],Oe=Z[1],Pe=function(){var o=C()(p()().mark(function n(){var t,l,i,a,d,f;return p()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,r.request)("./config.json");case 2:if(t=m.sent,l=t.api.layout,l){m.next=7;break}return j("The layout API cannot be null!"),m.abrupt("return");case 7:return P(!0),m.next=10,(0,y.U)({url:l});case 10:i=m.sent,re(i),i.menu&&(a=(0,O.hA)(i.menu,h.pathname,decodeURIComponent(M)),d=(0,O.Kg)(i.menu,a),D.push.apply(D,G()(d)),S(D),k([a])),f=(0,O.Ah)(i.menu,h.pathname,decodeURIComponent(M)),T(f),P(!1);case 16:case"end":return m.stop()}},n)}));return function(){return o.apply(this,arguments)}}(),he=function(){var o=C()(p()().mark(function n(){var t,l,i;return p()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(t=(0,O.Ah)(u.menu,h.pathname,decodeURIComponent(M)),T(t),M){d.next=5;break}return j(null),d.abrupt("return");case 5:return l={},Object.keys(v).forEach(function(f){f!=="api"&&(l[f]=v[f])}),P(!0),d.next=10,(0,y.U)({url:M,data:l});case 10:i=d.sent,j(i),P(!1);case 13:case"end":return d.stop()}},n)}));return function(){return o.apply(this,arguments)}}(),M="";v!=null&&v.api&&(M=v.api),(0,E.useEffect)(function(){Pe()},[]),(0,E.useEffect)(function(){he()},[v.api]);var De=function(n){k([n.key]);var t=(0,O.r7)(u.menu,n.key);if(t.is_link===1)return window.open(t.path,"_blank"),!1;r.history.push(t.path)},Ce=function(n){S(n)},ge=function(){var o=C()(p()().mark(function n(t){var l;return p()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:a.t0=t.key,a.next=a.t0==="logout"?3:a.t0==="setting"?9:11;break;case 3:return a.next=5,(0,y.U)({url:"/api/admin/logout/index/handle"});case 5:return l=a.sent,l.status==="success"&&localStorage.removeItem("token"),r.history.push("/"),a.abrupt("break",11);case 9:return r.history.push({pathname:"/layout/index",search:"api=/api/admin/account/setting/form"}),a.abrupt("break",11);case 11:case"end":return a.stop()}},n)}));return function(t){return o.apply(this,arguments)}}(),ye=[{key:"setting",icon:(0,_.jsx)(ee.Z,{}),label:"\u4E2A\u4EBA\u8BBE\u7F6E"},{key:"logout",icon:(0,_.jsx)(ne.Z,{}),label:"\u9000\u51FA\u767B\u5F55"}];return(0,_.jsx)(F.ZP,{locale:X.Z,children:(0,_.jsxs)(J.Z,{children:[(0,_.jsxs)(r.Helmet,{children:[(0,_.jsx)("meta",{charSet:"utf-8"}),(0,_.jsx)("title",{children:Ee})]}),(u==null?void 0:u.title)&&(0,_.jsx)(Y.f,A()(A()({},u),{},{loading:se,logo:u.logo?u.logo:w,iconfontUrl:u.iconfontUrl,openKeys:D,selectedKeys:ce,menuProps:{onOpenChange:Ce,onClick:De},onCollapse:function(n){Oe(n)},menuDataRender:function(){return u.menu},actionsRender:function(){return[(0,_.jsx)(g.Z,{body:u.actions},"action")]},avatarProps:{src:s!=null&&s.avatar?s==null?void 0:s.avatar:(0,_.jsx)(ae.Z,{}),size:"small",title:te.layout==="side"?fe||s==null?void 0:s.nickname:s==null?void 0:s.nickname,render:function(n,t){return(0,_.jsx)(Q.Z,{menu:{items:ye,onClick:ge},children:t})}},footerRender:function(){return(0,_.jsx)(g.Z,{body:u.footer})},children:U?(0,_.jsx)(g.Z,{body:U}):(0,_.jsx)(r.Outlet,{})}))]})})};L.default=_e}}]);
