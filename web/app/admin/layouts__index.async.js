"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[717],{52756:function(Re,y,e){e.r(y);var x=e(97857),L=e.n(x),z=e(15009),E=e.n(z),$=e(19632),G=e.n($),H=e(99289),g=e.n(H),N=e(5574),p=e.n(N),d=e(67294),r=e(80854),F=e(58720),J=e(3321),Q=e(33852),ye=e.n(Q),V=e(82925),X=e(64793),Y=e(94785),C=e(30184),q=e(45104),w=e(66949),h=e(43083),j=e(91373),ee=e(42952),ne=e(92443),_e=e(87547),a=e(85893),ae=function(te){var se=(0,r.useModel)("pageLoading"),oe=se.pageLoading,ue=(0,d.useState)({}),K=p()(ue,2),s=K[0],re=K[1],le=(0,d.useState)({}),A=p()(le,2),I=A[0],U=A[1],ie=(0,r.useModel)("pageLoading"),P=ie.setPageLoading,de=(0,r.useModel)("@@initialState"),R=de.initialState,o=R==null?void 0:R.accountInfo,D=(0,r.useLocation)(),c=Y.Z.parse(D.search),me=(0,d.useState)(""),T=p()(me,2),ce=T[0],b=T[1],Ee=(0,d.useState)([]),k=p()(Ee,2),f=k[0],B=k[1],pe=(0,d.useState)([""]),S=p()(pe,2),ve=S[0],W=S[1],Me=(0,d.useState)(!1),Z=p()(Me,2),he=Z[0],Pe=Z[1],De=function(){var t=g()(E()().mark(function n(){var u,m,_,O,l,M;return E()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,r.request)("./config.json");case 2:if(u=i.sent,m=u.api.layout,m){i.next=7;break}return U("\u8BF7\u8BBE\u7F6E\u5E03\u5C40\u63A5\u53E3\uFF01"),i.abrupt("return");case 7:return P(!0),i.next=10,(0,j.U)({url:m});case 10:_=i.sent,re(_),_.menu&&(O=(0,h.hA)(_.menu,D.pathname,decodeURIComponent(v)),l=(0,h.Kg)(_.menu,O),f.push.apply(f,G()(l)),B(f),W([O])),M=(0,h.Ah)(_.menu,D.pathname,decodeURIComponent(v)),b(M),P(!1);case 16:case"end":return i.stop()}},n)}));return function(){return t.apply(this,arguments)}}(),fe=function(){var t=g()(E()().mark(function n(){var u,m,_;return E()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(u=(0,h.Ah)(s.menu,D.pathname,decodeURIComponent(v)),b(u),v){l.next=5;break}return U(null),l.abrupt("return");case 5:return m={},Object.keys(c).forEach(function(M){M!=="api"&&(m[M]=c[M])}),P(!0),l.next=10,(0,j.U)({url:v,data:m});case 10:_=l.sent,U(_),P(!1);case 13:case"end":return l.stop()}},n)}));return function(){return t.apply(this,arguments)}}(),v="";c!=null&&c.api&&(v=c.api),(0,d.useEffect)(function(){De()},[]),(0,d.useEffect)(function(){fe()},[c.api]);var Oe=function(n){W([n.key]);var u=(0,h.r7)(s.menu,n.key);if(u.is_link===1)return window.open(u.path,"_blank"),!1;r.history.push(u.path)},ge=function(n){B(n)},Ce=function(n){switch(n.key){case"logout":je();break;case"setting":r.history.push({pathname:"/layout/index",search:"api=/api/admin/account/setting/form"});break}},je=function(){var t=g()(E()().mark(function n(){var u;return E()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,j.U)({url:"/api/admin/logout/index/handle"});case 2:u=_.sent,u.status==="success"&&localStorage.removeItem("token"),r.history.push("/");case 5:case"end":return _.stop()}},n)}));return function(){return t.apply(this,arguments)}}(),Ue=[{key:"setting",icon:(0,a.jsx)(ee.Z,{}),label:"\u4E2A\u4EBA\u8BBE\u7F6E"},{key:"logout",icon:(0,a.jsx)(ne.Z,{}),label:"\u9000\u51FA\u767B\u5F55"}];return(0,a.jsx)(F.ZP,{locale:V.Z,children:(0,a.jsxs)(J.Z,{children:[(0,a.jsxs)(r.Helmet,{children:[(0,a.jsx)("meta",{charSet:"utf-8"}),(0,a.jsx)("title",{children:ce})]}),(s==null?void 0:s.title)&&(0,a.jsx)(X.f,L()(L()({},s),{},{loading:oe,logo:s.logo?s.logo:w,iconfontUrl:s.iconfontUrl,openKeys:f,selectedKeys:ve,menuProps:{onOpenChange:ge,onClick:Oe},onCollapse:function(n){Pe(n)},menuDataRender:function(){return s.menu},actionsRender:function(){return[(0,a.jsx)(C.Z,{body:s.actions},"action")]},rightContentRender:function(){return(0,a.jsx)(q.Z,{menu:{items:Ue,onClick:Ce},avatar:o!=null&&o.avatar?o==null?void 0:o.avatar:(0,a.jsx)(_e.Z,{}),name:te.layout==="side"?he||o==null?void 0:o.nickname:o==null?void 0:o.nickname})},footerRender:function(){return(0,a.jsx)(C.Z,{body:s.footer})},children:I?(0,a.jsx)(C.Z,{body:I}):(0,a.jsx)(r.Outlet,{})}))]})})};y.default=ae}}]);
